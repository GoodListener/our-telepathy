{"version":3,"sources":["socket/socketManager.js","component/inviteDialog/InviteDialog.js","component/EmptyMember.js","dto/statusList.js","component/audio/AudioControl.js","component/callDialog/CallDialog.js","rtc/rtc.js","component/Member.js","store/memberList/memberList.reducer.js","component/MemberList.js","store/myInfo/myInfo.reducer.js","store/workingHours/workingHours.reducer.js","utils/utils.js","component/MyInfoBox.js","customHook/useInterval.js","component/dataDisplay/Line.js","component/dataDisplay/LineProgress.js","component/MyWorkBox.js","route/Main.js","route/Home.js","App.js","serviceWorker.js","store/index.js","index.js"],"names":["this","socket","io","myInfo","isJoined","console","log","member","emit","onAddMember","onRemoveMember","on","userInfo","id","userList","forEach","off","onChangeStatus","error","receiveDataMessage","type","targetId","message","messageObject","useStyles","makeStyles","theme","closeButton","position","right","spacing","top","color","palette","grey","linkText","width","dialogContent","display","flexDirection","justifyContent","height","InviteDialog","props","styles","inviteLink","window","location","href","slice","lastIndexOf","useState","title","link","userName","setUserName","onClose","open","Dialog","fullWidth","maxWidth","aria-labelledby","DialogTitle","className","dialogTitle","Typography","IconButton","onClick","DialogContent","TextField","label","onChange","e","target","value","required","aria-readonly","variant","onFocus","select","emptyContent","alignItems","plusIcon","EmptyMember","classes","setOpen","Grid","item","xs","md","Card","CardContent","Add","StatusDTO","statusInfo","status","buttonColor","lineColor","list","find","AudioControl","stream","audioRef","useRef","useEffect","current","srcObject","autoPlay","ref","controls","orange","getContrastText","deepOrange","backgroundColor","micOnIcon","endCallIcon","border","memberName","marginLeft","CallDialog","setTitle","micOn","setMicOn","isConnect","setIsConnect","connect","Avatar","name","Mic","MicOff","DialogActions","setTimeout","CallEnd","state","pcList","pcInfo","url","credential","username","getUserMedia","a","navigator","mediaDevices","audio","peerConnection","Promise","res","rej","then","myStream","pc","RTCPeerConnection","addStream","oniceconnectionstatechange","event","connectionState","handleOnIceConnectionStateChange","handleError","createOffer","sessionDescription","setLocalDescription","catch","createAnswer","destroyConnection","close","receiveOffer","offer","setRemoteDescription","RTCSessionDescription","receiveAnswer","answer","addIceCandidate","candidate","cardHeader","cardContent","cardStatusChip","alignSelf","cardAction","Member","setLabel","setStream","selectColor","setSelectColor","handleRemoteStreamRemoved","statusList","getStatus","changeStatus","elevation","CardHeader","action","Chip","CardActions","Button","rtc","onicecandidate","socketManager","sendMessageToUser","handleIceCandidate","onaddstream","handleRemoteStreamAdded","onremovestream","ADD_MEMBER","REMOVE_MEMBER","CHANGE_STATUS","initialState","memberBox","padding","marginTop","MemberList","memberList","useSelector","dispatch","useDispatch","addMember","memberId","updateMember","newMember","foundMember","mem","onJoin","offJoin","offChangeStatus","container","map","SET_MY_INFO","team","ADD","CHANGE_TIMELINE","CLEAR","CHANGE_TOTAL_TIME","workDate","Date","toISOString","startDate","endDate","currentStatus","currentIndex","totalTime","timeline","calcDateWidth","toFixed","getNewId","Math","round","random","workingStatusButton","restStatusButton","offStatusButton","MyInfoBox","teamId","workingHours","setTimeline","addTimeline","getFullDate","date","getFullYear","toString","getMonth","getDate","updateMyStatus","newMyInfo","utils","setMyInfo","join","callback","delay","savedCallback","setInterval","clearInterval","useInterval","index","lastDate","avatar","root","line","borderRadius","minWidth","boxShadow","useStylesTooltip","tooltip","Line","startTime","getHours","getMinutes","lastTime","Tooltip","LineProgress","idx","progress","workingInputHoursBox","marginBottom","MyWorkBox","getFormattedTime","setStartTime","endTime","setEndTime","setHours","split","changeTotalTime","Box","defaultValue","inputProps","step","hours","minutes","mainBox","Main","useParams","memberData","setMemberData","data","onMessageReceived","offMessageReceived","Container","home","fontSize","startButton","background","joinButton","Home","history","useHistory","started","setStarted","setTeamId","handleEnterKey","key","trim","length","joinTheTeam","joinTextField","onKeyPress","push","App","basename","path","Boolean","hostname","match","persistConfig","storage","whitelist","rootReducer","combineReducers","filter","persistReducer","store","createStore","persistor","persistStore","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.08389b49.chunk.js","sourcesContent":["import { io } from 'socket.io-client';\n\nclass SocketManager {\n    constructor() {\n        this.socket = io(\"https://flawless-psyche-307902.du.r.appspot.com\");\n        // this.socket = io(\"https://localhost:8080\");\n        this.myInfo = null;\n        this.isJoined = false;\n        console.log('socketManager');\n    }\n\n\n    join(member) {\n        if (!this.isJoined) {\n            this.myInfo = member;\n            this.socket.emit(\"join\", member);\n            this.isJoined = true;\n        }\n    }\n\n    /**\n     * \n     * @param {Function} onAddMember \n     * @param {Function} onRemoveMember \n     */\n    onJoin(onAddMember, onRemoveMember) {\n        this.socket.on('myInfo', userInfo => {\n            this.myInfo.id = userInfo.id;\n        })\n\n        this.socket.on('userList', userList => {\n            userList.forEach(userInfo => {\n                onAddMember(userInfo);\n            })\n        })\n\n        this.socket.on(\"joinedUser\", member => {\n            onAddMember(member);\n        });\n\n        this.socket.on(\"leavedUser\", id => {\n            onRemoveMember(id);\n        });\n    }\n\n    offJoin() {\n        this.socket.off('myInfo');\n        this.socket.off('userList');\n        this.socket.off('joinedUser');\n        this.socket.off('leavedUser');\n    }\n\n    getMyInfo() {\n        return this.myInfo;\n    }\n\n    changeStatus(member) {\n        this.socket.emit('changeStatus', member);\n    }\n\n\n    onChangeStatus(onChangeStatus) {\n        this.socket.on('onChangeStatus', onChangeStatus);\n    }\n\n    offChangeStatus() {\n        this.socket.off('onChangeStatus');\n    }\n\n    onError(error) {\n        console.error(error);\n    }\n\n    onMessageReceived(receiveDataMessage) {\n        this.socket.on('receivePrivateMessage', receiveDataMessage);\n    }\n\n    offMessageReceived() {\n        this.socket.off('receivePrivateMessage')\n    }\n\n    sendMessageToUser(type, targetId, message) {\n        const messageObject = {\n            id: this.myInfo.id, // sender id\n            type: type,\n            message: message\n        };\n        this.socket.emit('privateMessage', targetId, messageObject);\n    }\n}\n\nexport default new SocketManager();","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Dialog, DialogContent, DialogTitle, IconButton, TextField, Typography } from '@material-ui/core';\nimport Close from '@material-ui/icons/Close';\n\nconst useStyles = makeStyles((theme) => ({\n    closeButton: {\n        position: 'absolute',\n        right: theme.spacing(1),\n        top: theme.spacing(1),\n        color: theme.palette.grey[500]\n    },\n    linkText: {\n        width: '100%'\n    },\n    dialogContent: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-around',\n        height: '150px'\n    }\n}));\n\nexport default function InviteDialog(props) {\n    const styles = useStyles();\n    const inviteLink = window.location.href.slice(0, window.location.href.lastIndexOf('/') + 1);\n    const [title, setTitle] = useState('멤버 초대');\n    const [link, setLink] = useState(inviteLink);\n    const [userName, setUserName] = useState('');\n    const { onClose, open } = props;\n\n    function handleChangeInviteUserName(e) {\n        setUserName(e.target.value)\n    }\n\n    function handleFocus(e) {\n        e.target.select();\n    }\n\n    return (\n        <Dialog onClose={onClose} fullWidth={true} maxWidth={\"sm\"} aria-labelledby=\"dialog-title\" open={open}>\n            <DialogTitle id=\"dialog-title\" className={styles.dialogTitle}>\n                <Typography>{title}</Typography>\n                <IconButton onClick={onClose} className={styles.closeButton}>\n                    <Close />\n                </IconButton>\n            </DialogTitle>\n            <DialogContent className={styles.dialogContent}>\n                <TextField\n                    label=\"초대할 사용자 이름\"\n                    onChange={handleChangeInviteUserName}\n                    value={userName}\n                    required\n                />\n                <TextField\n                    label=\"초대 링크\"\n                    className={styles.linkText}\n                    aria-readonly={true}\n                    value={link + userName}\n                    variant=\"outlined\"\n                    onFocus={handleFocus}\n                ></TextField>\n            </DialogContent>\n        </Dialog>\n    );\n}\n\nInviteDialog.propTypes = {\n    onClose: PropTypes.func.isRequired,\n    open: PropTypes.bool.isRequired\n}","import { Card, CardContent, Grid, IconButton, makeStyles } from '@material-ui/core';\nimport { Add } from '@material-ui/icons';\nimport React, { useState } from 'react';\nimport InviteDialog from './inviteDialog/InviteDialog'\n\nconst useStyles = makeStyles({\n    emptyContent: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '140px'\n    },\n    plusIcon: {\n        width: '80px',\n        height: '80px',\n    }\n})\n\nexport default function EmptyMember() {\n    const classes = useStyles();\n    const [open, setOpen] = useState(false);\n\n    function handleOpenInviteDialog() {\n        setOpen(true);\n    }\n\n    function handleClose() {\n        setOpen(false);\n    }\n\n    return (\n        <Grid item xs={6} md={3}>\n            <Card variant=\"outlined\">\n                <CardContent className={classes.emptyContent}>\n                    <IconButton className={classes.plusIcon} onClick={handleOpenInviteDialog}>\n                        <Add />\n                    </IconButton>\n                </CardContent>\n            </Card>\n            <InviteDialog open={open} onClose={handleClose}></InviteDialog>\n        </Grid>\n    )\n}","class StatusDTO {\n    constructor(statusInfo) {\n        this.status = statusInfo.status;\n        this.buttonColor = statusInfo.buttonColor;\n        this.lineColor = statusInfo.lineColor;\n        this.label = statusInfo.label;\n    }\n}\n\nclass StatusDTOList {\n    constructor() {\n        this.list = [\n            new StatusDTO({\n                status: 'working',\n                buttonColor: 'primary',\n                lineColor: '#C6BDFB',\n                label: '업무중'\n            }),\n            new StatusDTO({\n                status: 'meeting',\n                buttonColor: 'primary',\n                lineColor: '#86B7E5',\n                label: '회의중'\n            }),\n            new StatusDTO({\n                status: 'meal',\n                buttonColor: 'secondary',\n                lineColor: '#75CD83',\n                label: '식사중'\n            }),\n            new StatusDTO({\n                status: 'rest',\n                buttonColor: 'secondary',\n                lineColor: '#FFCBC0',\n                label: '휴식중'\n            }),\n            new StatusDTO({\n                status: 'offwork',\n                buttonColor: 'default',\n                lineColor: '#8F95A4',\n                label: '퇴근'\n            })\n        ]\n    }\n\n    /**\n     * \n     * @param {String} status \n     * @returns {StatusDTO}\n     */\n    getStatus(status) {\n        const statusInfo = this.list.find(item => item.status === status);\n        return statusInfo ? statusInfo : new StatusDTO({\n            status: 'default',\n            buttonColor: 'default',\n            lineColor: '#eee',\n            label: '준비중'\n        });\n    }\n}\n\n\n\nexport default new StatusDTOList();","import React, { useEffect, useRef } from 'react';\n\nexport default function AudioControl({ stream }) {\n    const audioRef = useRef();\n\n    useEffect(() => {\n        audioRef.current.srcObject = stream;\n        audioRef.current.autoPlay = 'autoplay';\n    })\n\n    return (\n        <div>\n            <audio ref={audioRef} autoPlay=\"autoplay\" controls=\"controls\"></audio>\n        </div>\n    )\n}","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { deepOrange } from '@material-ui/core/colors';\nimport { Avatar, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, Typography } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { CallEnd, Mic, MicOff } from '@material-ui/icons';\nimport AudioControl from '../audio/AudioControl';\n\nconst useStyles = makeStyles((theme) => ({\n    orange: {\n        color: theme.palette.getContrastText(deepOrange[500]),\n        backgroundColor: deepOrange[500],\n    },\n    closeButton: {\n        position: 'absolute',\n        right: theme.spacing(1),\n        top: theme.spacing(1),\n        color: theme.palette.grey[500]\n    },\n    micOnIcon: {\n        color: '#A30014'\n    },\n    endCallIcon: {\n        border: '1px solid gray',\n    },\n    dialogContent: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n    },\n    memberName: {\n        marginLeft: theme.spacing(1)\n    }\n}));\n\nexport default function CallDialog(props) {\n    const styles = useStyles();\n    const [title, setTitle] = useState('연결중');\n    const [micOn, setMicOn] = useState(false);\n    const [isConnect, setIsConnect] = useState(false);\n    const { type, member, onClose, open, connect, stream } = props;\n\n    useEffect(() => {\n        if (type === 'offer' && !isConnect) {\n            open && connect(member);\n            setIsConnect(true);\n        }\n\n        if (!open) {\n            setIsConnect(false);\n        }\n    });\n\n    function handleMicOn() {\n        setMicOn(!micOn);\n    }\n\n    function handleReceiveCall() {\n        if (type === 'answer' && !isConnect) {\n            connect(member);\n            setIsConnect(true);\n        }\n    }\n\n    function handleEndCall() {\n        setTitle('통화 종료');\n        setTimeout(() => {\n            onClose();\n        }, 3000);\n    }\n\n    return (\n        <Dialog fullWidth={true} maxWidth={\"xs\"} aria-labelledby=\"dialog-title\" open={open}>\n            <DialogTitle id=\"dialog-title\" className={styles.dialogTitle}>\n                <Typography>{title}</Typography>\n                <IconButton onClick={onClose} className={styles.closeButton}>\n                    <CloseIcon />\n                </IconButton>\n            </DialogTitle>\n            <DialogContent className={styles.dialogContent}>\n                <Avatar className={styles.orange}>응</Avatar>\n                <Typography className={styles.memberName}>\n                    {member.name}\n                </Typography>\n                <IconButton onClick={handleMicOn} className={styles.micOnIcon}>\n                    {micOn ? <Mic /> : <MicOff />}\n                </IconButton>\n            </DialogContent>\n            <DialogActions className={styles.dialogContent}>\n                {\n                    isConnect ?\n                        (<IconButton onClick={handleEndCall} color=\"secondary\">\n                            <CallEnd />\n                        </IconButton>)\n                        :\n                        (<IconButton onClick={handleReceiveCall} color=\"primary\">\n                            <CallEnd />\n                        </IconButton>)\n                }\n            </DialogActions>\n            <AudioControl stream={stream}></AudioControl>\n        </Dialog>\n    );\n}\n\nCallDialog.propTypes = {\n    onClose: PropTypes.func.isRequired,\n    open: PropTypes.bool.isRequired,\n    member: PropTypes.any.isRequired\n}","const state = {\n    pcList: {},\n    stream: null\n}\n\nconst pcInfo = {\n    'iceServers': [\n        { url: 'stun:34.64.112.126:3478' },\n        {\n            url: 'turn:34.64.112.126:3478?transport=udp',\n            credential: 'dmdcjfdl',\n            username: 'ekim'\n        }],\n    'DtlsSrtpKeyAgreement': true\n\n};\n\nasync function getUserMedia() {\n    if (state.stream) {\n        return state.stream;\n    }\n    state.stream = await navigator.mediaDevices.getUserMedia({ audio: true })\n    return state.stream;\n}\n\nfunction peerConnection(id) {\n    return new Promise((res, rej) => {\n        getUserMedia().then(stream => {\n            window.myStream = stream;\n            try {\n                const pc = new RTCPeerConnection(pcInfo);\n                pc.addStream(stream);\n                pc.oniceconnectionstatechange = (event) => { handleOnIceConnectionStateChange(id, event); };\n                state.pcList[id] = pc;\n                res(pc);\n            } catch (e) {\n                console.error(e);\n                rej(e)\n            }\n        })\n    });\n}\n\nfunction createOffer(id) {\n    console.log('createOffer: ' + id);\n    return new Promise((res, rej) => {\n        peerConnection(id)\n            .then(pc => {\n                state.pcList[id].createOffer(sessionDescription => {\n                    state.pcList[id].setLocalDescription(sessionDescription);\n                    res({ pc, sessionDescription });\n                }, handleError)\n            })\n            .catch(e => {\n                rej(e);\n            })\n    })\n}\n\nfunction receiveOffer(id, offer) {\n    console.log('receiveOffer: ' + id);\n    if (!state.pcList[id]) {\n        return new Promise(res => {\n            peerConnection(id)\n                .then(pc => {\n                    pc.setRemoteDescription(new RTCSessionDescription(offer));\n                    res(pc);\n                });\n        })\n    }\n}\n\nfunction destroyConnection(id) {\n    if (state.pcList[id]) {\n        state.pcList[id].close();\n        state.pcList[id] = null;\n    }\n}\n\nfunction createAnswer(id) {\n    return new Promise(res => {\n        if (state.pcList[id].connectionState !== \"connected\") {\n            state.pcList[id].createAnswer(sessionDescription => {\n                state.pcList[id].setLocalDescription(sessionDescription);\n                res(sessionDescription);\n            }, handleError);\n        }\n    })\n}\n\nfunction receiveAnswer(id, answer) {\n    state.pcList[id].setRemoteDescription(new RTCSessionDescription(answer));\n}\n\nfunction addIceCandidate(id, candidate) {\n    console.log(state.pcList[id]);\n    if (state.pcList[id])\n        state.pcList[id].addIceCandidate(candidate);\n}\n\nfunction handleOnIceConnectionStateChange(id, event) {\n    console.log(id, event);\n    console.log(state.pcList[id].connectionState)\n    if (state.pcList[id].connectionState === \"connected\") {\n        console.log('connected');\n    }\n}\n\nfunction handleError(error) {\n    console.error(error);\n}\n\n\nexport default {\n    getUserMedia,\n    createOffer,\n    createAnswer,\n    destroyConnection,\n    receiveOffer,\n    receiveAnswer,\n    addIceCandidate,\n}","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Avatar, Button, Card, CardActions, CardContent, CardHeader, Chip, Grid, makeStyles, Typography } from '@material-ui/core';\nimport { deepOrange } from '@material-ui/core/colors';\nimport statusList from '../dto/statusList'\nimport CallDialog from './callDialog/CallDialog';\nimport socketManager from '../socket/socketManager';\nimport rtc from '../rtc/rtc';\n\nconst useStyles = makeStyles((theme) => ({\n    orange: {\n        color: theme.palette.getContrastText(deepOrange[500]),\n        backgroundColor: deepOrange[500],\n    },\n    cardHeader: {\n        alignItems: \"center\"\n    },\n    cardContent: {\n        display: \"flex\",\n        justifyContent: \"space-between\"\n    },\n    cardStatusChip: {\n        alignSelf: \"center\"\n    },\n    cardAction: {\n        width: '100%'\n    }\n}));\n\nexport default function Member({member}) {\n    const styles = useStyles();\n    const [open, setOpen] = useState(false);\n    const [label, setLabel] = useState('');\n    const [stream, setStream] = useState(null);\n    const [selectColor, setSelectColor] = useState('primary');\n\n    useEffect(() => {\n        changeStatus(member.status);\n    });\n\n    function offerToMember(member) {\n        console.log('offerToMember');\n        console.log(member);\n        rtc.createOffer(member.id)\n            .then(({ pc, sessionDescription }) => {\n                pc.onicecandidate = (event) => { handleIceCandidate(member.id, event) };\n                pc.onaddstream = (event) => { handleRemoteStreamAdded(member.id, event); };\n                pc.onremovestream = handleRemoteStreamRemoved;\n                socketManager.sendMessageToUser('offer', member.id, sessionDescription);\n            });\n    }\n\n    function handleIceCandidate(id, event) {\n        console.log(id, event);\n        if (event.candidate) {\n            socketManager.sendMessageToUser('candidate', id, event.candidate);\n        }\n    }\n\n    function handleRemoteStreamAdded(id, event) {\n        console.log(id, event);\n        setStream(event.stream);\n    }\n\n    function handleRemoteStreamRemoved(event) {\n        console.log(event);\n    }\n\n    function changeStatus (status) {\n        const statusInfo = statusList.getStatus(status);\n        setLabel(statusInfo.label);\n        setSelectColor(statusInfo.buttonColor);\n    }\n\n    function handleClickCallDialogOpen() {\n        setOpen(true);\n    }\n\n    function handleClose() {\n        setOpen(false);\n        rtc.destroyConnection(member.id);\n    }\n\n    return <Grid item xs={6} md={3}>\n        <Card elevation={4}>\n            <CardHeader\n                className={styles.cardHeader}\n                action={<Chip className={styles.cardStatusChip} color={selectColor} label={label} />}\n            >\n            </CardHeader>\n            <CardContent className={styles.cardContent}>\n                <Avatar className={styles.orange}>O</Avatar>\n                <Typography>{member.name}</Typography>\n            </CardContent>\n            <CardActions>\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    className={styles.cardAction}\n                    onClick={handleClickCallDialogOpen}\n                >\n                    Call\n                </Button>\n            </CardActions>\n            <CallDialog type=\"offer\" member={member} open={open} onClose={handleClose} connect={offerToMember} stream={stream}></CallDialog>\n        </Card>\n    </Grid>\n}\n\nMember.propTypes = {\n    member: PropTypes.any.isRequired\n}","const ADD_MEMBER = '/memberList/ADD_MEMBER';\nconst REMOVE_MEMBER = '/memberList/REMOVE_MENBER';\nconst CHANGE_STATUS = '/memberList/CHANGE_STATUS';\n\nexport const addMember = member => ({type: ADD_MEMBER, member});\nexport const removeMember = memberId => ({type: REMOVE_MEMBER, memberId});\nexport const changeStatus = member => ({type: CHANGE_STATUS, member});\n\nconst initialState = [];\n\nexport default function memberList(state = initialState, action) {\n    switch(action.type) {\n        case ADD_MEMBER:\n            return [\n                ...state,\n                action.member\n            ]\n        case REMOVE_MEMBER:\n            return state.filter(member => {\n                return member.id !== action.memberId;\n            })\n        case CHANGE_STATUS: \n            return state.map(member => {\n                if (member.id === action.member.id) {\n                    return action.member;\n                }\n                return member;\n            })\n        default :\n            return state;\n    }\n}","import { Grid, makeStyles } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport socketManager from '../socket/socketManager';\nimport EmptyMember from './EmptyMember';\nimport Member from './Member';\nimport { changeStatus, addMember, removeMember } from '../store/memberList/memberList.reducer';\n\nconst useStyles = makeStyles({\n    memberBox: {\n        padding: \"10px 40px\",\n        marginTop: \"20px\"\n    }\n})\n\nexport default function MemberList() {\n    const memberList = useSelector(state => state.memberList);\n    const dispatch = useDispatch();\n    const styles = useStyles();\n\n    useEffect(() => {\n        socketManager.onJoin(onAddMember, onRemoveMember);\n\n        return () => {\n            socketManager.offJoin();\n        }\n    });\n\n    useEffect(() => {\n        socketManager.onChangeStatus(onChangeStatus);\n\n        return () => {\n            socketManager.offChangeStatus();\n        }\n    });\n\n    function onAddMember(member) {\n        dispatch(addMember(member));\n    }\n\n    /**\n     * \n     * @param {string} id \n     */\n    function onRemoveMember(id) {\n        dispatch(removeMember(id));\n    }\n\n    function updateMember(newMember) {\n        dispatch(changeStatus(newMember))\n    }\n\n    function onChangeStatus(member) {\n        const foundMember = memberList.find(mem => mem.id === member.id);\n        if (foundMember) {\n            foundMember.status = member.status;\n            updateMember(foundMember);\n        }\n    }\n\n    return <Grid container spacing={3} className={styles.memberBox}>\n        {memberList.map(member => <Member key={member.id} member={member}></Member>)}\n        <EmptyMember></EmptyMember>\n    </Grid>\n}","import { createStore } from \"redux\";\n\nconst SET_MY_INFO = '/myInfo/SET_MY_INFO';\nconst CHANGE_STATUS = '/myInfo/CHANGE_STATUS';\n\nexport const setMyInfo = myInfo => ({type: SET_MY_INFO, ...myInfo});\nexport const changeStatus = myInfo => ({type: CHANGE_STATUS, ...myInfo});\n\nconst initialState = {\n    id: '',\n    name: '',\n    team: '',\n    status: ''\n}\n\n\nexport default function myInfo(state = initialState, action) {\n    switch(action.type) {\n        case SET_MY_INFO:\n            return {\n                ...state,\n                id: action.id,\n                name: action.name,\n                team: action.team,\n                status: action.status\n            }\n        case CHANGE_STATUS:\n            return {\n                ...state,\n                status: action.status\n            }\n        default :\n            return state;\n    }\n}","const ADD = '/timeline/ADD';\nconst CHANGE_TIMELINE = '/timeline/CHANGE_TIMELINE';\nconst CLEAR = '/timeline/CLEAR';\nconst CHANGE_TOTAL_TIME = '/timeline/CHANGE_WORKING_HOURS';\n\nexport const addTimeline = workingHours => ({ type: ADD, ...workingHours });\nexport const changeTimeline = timeline => ({ type: CHANGE_TIMELINE, ...timeline });\nexport const clear = () => ({ type: CLEAR });\nexport const changeTotalTime = workingHours => ({ type: CHANGE_TOTAL_TIME, ...workingHours });\n\nconst initialState = {\n    workDate: new Date().toISOString(),\n    startDate: null,\n    endDate: null,\n    currentStatus: '',\n    currentIndex: -1,\n    totalTime: 60 * 60 * 1000,\n    timeline: []\n}\n\nexport default function workingHours(state = initialState, action) {\n    switch (action.type) {\n        case ADD:\n            return {\n                ...state,\n                currentIndex: state.currentIndex + 1,\n                currentStatus: action.status,\n                timeline: [\n                    ...state.timeline,\n                    {\n                        ...action.timeline,\n                        index: state.currentIndex + 1\n                    }\n                ]\n            }\n        case CHANGE_TIMELINE:\n            return {\n                ...state,\n                timeline: state.timeline.map(item => {\n                    if (item.index == action.index) {\n                        return {\n                            ...item,\n                            width: calcDateWidth(item.startDate, action.lastDate, state.totalTime),\n                            lastDate: action.lastDate\n                        };\n                    }\n                    return item;\n                })\n            }\n        case CHANGE_TOTAL_TIME:\n            return {\n                ...state,\n                totalTime: action.totalTime,\n                startDate: action.startDate ? action.startDate : state.startDate,\n                endDate: action.endDate ? action.endDate : state.endDate,\n                timeline: state.timeline.map(item => {\n                    return {\n                        ...item,\n                        width: calcDateWidth(item.startDate, item.lastDate, action.totalTime)\n                    }\n                })\n            }\n        case CLEAR:\n            return initialState;\n        default:\n            return state;\n    }\n}\n\nfunction calcDateWidth(startDate, endDate, totalTime) {\n    return ((new Date(endDate) - new Date(startDate)) / totalTime * 100).toFixed(2);\n}","function getNewId() {\n    return Math.round(Math.random() * 99999999);\n}\n\nexport default {\n    getNewId\n}","import { Avatar, Button, Card, CardContent, CardHeader, Chip, Grid, makeStyles } from '@material-ui/core';\nimport { deepOrange } from '@material-ui/core/colors';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport socketManager from '../socket/socketManager';\nimport { changeStatus, setMyInfo } from '../store/myInfo/myInfo.reducer'\nimport { addTimeline, changeTimeline, clear } from '../store/workingHours/workingHours.reducer';\nimport utils from '../utils/utils';\nimport statusList from '../dto/statusList';\nimport useInterval from '../customHook/useInterval';\n\nconst useStyles = makeStyles((theme) => ({\n    orange: {\n        color: theme.palette.getContrastText(deepOrange[500]),\n        backgroundColor: deepOrange[500],\n    },\n    cardHeader: {\n        alignItems: \"center\"\n    },\n    cardContent: {\n        display: \"flex\",\n        justifyContent: \"space-between\"\n    },\n    cardStatusChip: {\n        alignSelf: \"center\"\n    },\n    workingStatusButton: {\n        color: '#5843BE'\n    },\n    restStatusButton: {\n        color: '#FFA067'\n    },\n    offStatusButton: {\n        color: '#282828'\n    }\n}));\n\nexport default function MyInfoBox({ teamId, userName }) {\n    const styles = useStyles();\n    const [label, setLabel] = useState('');\n    const [selectColor, setSelectColor] = useState('primary');\n    const myInfo = useSelector(state => state.myInfo);\n    const workingHours = useSelector(state => state.workingHours);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        const newMyInfo = {\n            id: myInfo.id ? myInfo.id : utils.getNewId(),\n            name: userName,\n            team: teamId,\n            status: myInfo.status ? myInfo.status : 'working'\n        }\n        dispatch(setMyInfo(newMyInfo))\n        socketManager.join(newMyInfo);\n        updateMyStatus(newMyInfo.status);\n    }, []);\n\n    useEffect(() => {\n        socketManager.changeStatus(myInfo);\n    }, [myInfo])\n\n    useEffect(() => {\n        if (getFullDate(new Date(workingHours.workDate)) !== getFullDate(new Date)) {\n            dispatch(clear());\n        }\n    }, [])\n\n    useInterval(() => {\n        dispatch(changeTimeline({\n            index: workingHours.currentIndex,\n            lastDate: new Date().toISOString()\n        }))\n    }, 1000)\n\n    function setTimeline(status) {\n        dispatch(addTimeline({\n            status: status,\n            timeline: {\n                status: status,\n                color: statusList.getStatus(status).lineColor,\n                startDate: new Date().toISOString()\n            }\n        }))\n    }\n\n    function getFullDate(date) {\n        return date.getFullYear().toString() + (date.getMonth() + 1).toString() + date.getDate().toString();\n    }\n\n    function updateMyStatus(status) {\n        dispatch(changeStatus({ status: status }));\n        setTimeline(status);\n        const statusInfo = statusList.getStatus(status);\n        setLabel(statusInfo.label);\n        setSelectColor(statusInfo.buttonColor);\n    }\n\n    return (\n        <Card elevation={0}>\n            <CardHeader\n                className={styles.cardHeader}\n                avatar={<Avatar className={styles.orange}>응</Avatar>}\n                title={myInfo.name}\n                action={<Chip className={styles.cardStatusChip} color={selectColor} label={label} />}\n            >\n            </CardHeader>\n            <CardContent className={styles.cardContent}>\n                {(statusList.list.map((item, index) => (\n                        <Grid key={index} item xs=\"auto\">\n                            <Button\n                                variant={myInfo.status === item.status ? \"contained\" : \"text\"}\n                                color={selectColor}\n                                onClick={() => { updateMyStatus(item.status) }}\n                            >{item.label}</Button>\n                        </Grid>\n                    )\n                ))}\n            </CardContent>\n\n        </Card>\n    )\n}","import { useEffect, useRef } from \"react\";\n\nexport default function useInterval(callback, delay) {\n    const savedCallback = useRef();\n\n    // Remember the latest function.\n    useEffect(() => {\n        savedCallback.current = callback;\n    }, [callback]);\n\n    // Set up the interval.\n    useEffect(() => {\n        function tick() {\n            savedCallback.current();\n        }\n        if (delay !== null) {\n            let id = setInterval(tick, delay);\n            return () => clearInterval(id);\n        }\n    }, [delay]);\n}","import { makeStyles, Tooltip } from '@material-ui/core';\nimport React from 'react';\nimport statusList from '../../dto/statusList'\n\nconst useStyles = makeStyles({\n    root: (props) => ({\n        backgroundColor: props.line.color,\n        width: `${props.line.width}%`,\n        height: '100%',\n        display: 'inline-block',\n        \"&:first-child\": {\n            borderRadius: '0.3rem 0 0 0.3rem'\n        },\n        \"&:last-child\": {\n            minWidth: '3px',\n            borderRadius: '0 0.3rem 0.3rem 0'\n        },\n        \"&:hover\": {\n            boxShadow: `0 0 2px 2px ${props.line.color}88`\n        }\n\n    })\n});\n\nconst useStylesTooltip = makeStyles({\n    tooltip: (props) => ({\n        backgroundColor: props.line.color\n    })\n})\n\nexport default function Line(props) {\n    const styles = useStyles(props);\n    const classes = useStylesTooltip(props);\n    const label = statusList.getStatus(props.line.status).label;\n    const startDate = new Date(props.line.startDate);\n    const startTime = startDate.getHours() + \":\" + startDate.getMinutes();\n    const lastDate = new Date(props.line.lastDate);\n    const lastTime = lastDate.getHours() + \":\" + lastDate.getMinutes();\n    return <Tooltip title={label + ' (' + startTime + ' ~ ' + lastTime + ')'} classes={classes}><span className={styles.root}></span></Tooltip>\n}","import { makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport Line from './Line';\n\nexport default function LineProgress({className, timeline}) {\n    return (\n        <div className={className}>\n            {timeline.map((line, idx) => <Line key={idx} line={line}></Line>)}\n        </div>\n    )\n}","import { Box, makeStyles, TextField } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changeTotalTime } from '../store/workingHours/workingHours.reducer';\nimport LineProgress from './dataDisplay/LineProgress'\n\nconst useStyles = makeStyles({\n    progress: {\n        height: \"1.5rem\",\n        backgroundColor: \"#fff\",\n        borderRadius: '0.3rem'\n    },\n    workingInputHoursBox: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        marginBottom: '5px'\n    }\n});\n\nexport default function MyWorkBox() {\n    const styles = useStyles();\n    const workingHours = useSelector(state => state.workingHours);\n    const [startTime, setStartTime] = useState(getFormattedTime(workingHours.startDate));\n    const [endTime, setEndTime] = useState(getFormattedTime(workingHours.endDate));\n    const dispatch = useDispatch();\n\n    function handleStartTime(e) {\n        setStartTime(e.target.value);\n    }\n\n    function handleEndTime(e) {\n        setEndTime(e.target.value);\n    }\n\n    useEffect(() => {\n        const startDate = new Date();\n        const endDate = new Date();\n        startDate.setHours(startTime.split(':')[0], startTime.split(':')[1]);\n        endDate.setHours(endTime.split(':')[0], endTime.split(':')[1]);\n        const totalTime = endDate - startDate;\n        if (totalTime > 0) {\n            dispatch(changeTotalTime({\n                totalTime: totalTime,\n                startDate: startDate,\n                endDate: endDate\n            }))\n        }\n    }, [startTime, endTime])\n\n    return (\n        <Box>\n            <Box className={styles.workingInputHoursBox}>\n                <TextField\n                    id=\"startTime\"\n                    label=\"출근\"\n                    type=\"time\"\n                    defaultValue={startTime}\n                    inputProps={{\n                        step: 60,\n                    }}\n                    onChange={handleStartTime}\n                />\n                <TextField\n                    id=\"endTime\"\n                    label=\"퇴근\"\n                    type=\"time\"\n                    defaultValue={endTime}\n                    inputProps={{\n                        step: 60\n                    }}\n                    onChange={handleEndTime}\n                />\n            </Box>\n            <LineProgress className={styles.progress} timeline={workingHours.timeline}></LineProgress>\n        </Box>\n    )\n}\n\nfunction getFormattedTime(date) {\n    const hours = new Date(date).getHours();\n    const minutes = new Date(date).getMinutes();\n    return (hours > 9 ? hours : '0' + hours) + \":\" + (minutes > 9 ? minutes : '0' + minutes);\n}","import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport MemberList from '../component/MemberList';\nimport MyInfoBox from '../component/MyInfoBox';\nimport socketManager from '../socket/socketManager';\nimport rtc from '../rtc/rtc';\nimport { makeStyles, Container, Grid, Typography } from '@material-ui/core';\nimport MyWorkBox from '../component/MyWorkBox';\nimport CallDialog from '../component/callDialog/CallDialog';\n\nconst useStyles = makeStyles({\n    mainBox: {\n        backgroundColor: \"#F1F3F6\",\n        padding: \"10px 20px\"\n    }\n})\n\nexport default function Main() {\n    const styles = useStyles();\n    const { teamId, userName } = useParams();\n    const [open, setOpen] = useState(false);\n    const [memberData, setMemberData] = useState({name: 'null', id: ''});\n    const [stream, setStream] = useState(null);\n\n    useEffect(() => {\n        socketManager.onMessageReceived(receiveDataMessage);\n\n        return () => {\n            socketManager.offMessageReceived();\n        }\n    });\n\n    function receiveDataMessage(data) {\n        console.log(data);\n        switch (data.type) {\n            case 'offer':\n                setMemberData({\n                    name: 'test',\n                    id: data.id,\n                    message: data.message\n                })\n                setOpen(true);\n                break;\n            case 'answer':\n                rtc.receiveAnswer(data.id, data.message);\n                break;\n            case 'candidate':\n                rtc.addIceCandidate(data.id, data.message);\n                break;\n            default:\n                console.log(data);\n                break;\n        }\n    }\n\n    function receiveOffer(data) {\n        rtc.receiveOffer(data.id, data.message)\n        .then(pc => {\n            pc.onicecandidate = (event) => { handleIceCandidate(data.id, event) };\n            pc.onaddstream = (event) => { handleRemoteStreamAdded(data.id, event); };\n            pc.onremovestream = handleRemoteStreamRemoved;\n            rtc.createAnswer(data.id).then(sessionDescription => {\n                socketManager.sendMessageToUser('answer', data.id, sessionDescription);\n            })\n        })\n    }\n\n    function handleIceCandidate(id, event) {\n        if (event.candidate) {\n            socketManager.sendMessageToUser('candidate', id, event.candidate);\n        }\n    }\n\n    function handleRemoteStreamAdded(id, event) {\n        setStream(event.stream);\n    }\n\n    function handleRemoteStreamRemoved(event) {\n        console.log(event);\n    }\n\n    function handleClose() {\n        setOpen(false);\n        rtc.destroyConnection(memberData.id);\n    }\n\n    return (\n        <Container maxWidth=\"md\">\n            <Grid container spacing={3} className={styles.mainBox}>\n                <Grid item xs={12} md={12}>\n                    <Typography>TeleTele</Typography>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <MyInfoBox\n                        userName={userName}\n                        teamId={teamId}\n                    ></MyInfoBox>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <MyWorkBox\n\n                    >\n                    </MyWorkBox>\n                </Grid>\n            </Grid>\n            <MemberList className={styles.mainBox}></MemberList>\n            <CallDialog type=\"answer\" member={memberData} open={open} onClose={handleClose} connect={receiveOffer} stream={stream}></CallDialog>\n        </Container>\n    );\n}","import React, { useEffect, useState } from 'react';\nimport { Button, Box, makeStyles, TextField } from '@material-ui/core'\nimport { useHistory } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\n\nconst useStyles = makeStyles({\n    home: {\n        position: 'absolute',\n        display: 'flex',\n        width: '100%',\n        height: '100%',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexDirection: 'column'\n    },\n    title: {\n        height: '3rem',\n        fontSize: '2rem'\n    },\n    startButton: {\n        background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',\n        color: '#fff',\n        width: '200px',\n        height: '50px',\n        borderRadius: '30px',\n        fontSize: '1.2rem'\n    },\n    joinButton: {\n        fontSize: '1.2rem'\n    }\n})\n\nexport default function Home() {\n    const styles = useStyles();\n    const history = useHistory();\n    const [started, setStarted] = useState(false);\n    const [teamId, setTeamId] = useState('');\n    const [userName, setUserName] = useState('');\n    const myInfo = useSelector(state => state.myInfo);\n\n    useEffect(() => {\n        if (myInfo.id) {\n            setTeamId(myInfo.team);\n            setUserName(myInfo.name);\n        }\n    }, []);\n\n    function handleChange(e) {\n        setTeamId(e.target.value);\n    }\n    \n    function handleChangeMyName(e) {\n        setUserName(e.target.value);\n    }\n    function handleEnterKey(e) {\n        if (e.key === 'Enter') {\n            if (!started && teamId.trim().length <= 0) {\n                return;\n            } else if (started && userName.trim().length <= 0) {\n                return;\n            }\n\n            started ? setStarted(true) : joinTheTeam();\n        }\n    }\n    function joinTheTeam() {\n        if (!started && teamId.trim().length <= 0) {\n            return;\n        }\n        setStarted(true);\n    }\n    function handleClick() {\n        if (started && userName.trim().length <= 0) {\n            return;\n        }\n        history.push(`/team/${teamId}/${userName}`);\n    }\n\n    return (\n        <Box className={styles.home}>\n            <h2 className={styles.title}>TeleTele</h2>\n            <h3>\n                {!started && <>\n                    <TextField\n                        label=\"TEAM\"\n                        className={styles.joinTextField}\n                        onChange={handleChange}\n                        onKeyPress={handleEnterKey}\n                        value={teamId}\n                        required\n                    />\n                    <br/><br/>\n                    <Button\n                        className={styles.startButton}\n                        onClick={joinTheTeam}\n                    >JOIN\n                    </Button>\n                </>}\n                {started && <>\n                    <TextField\n                        label=\"MY NAME\"\n                        className={styles.joinTextField}\n                        onChange={handleChangeMyName}\n                        onKeyPress={handleEnterKey}\n                        value={userName}\n                        required\n                    />\n                    <br/><br/>\n                    <Button\n                        className={styles.startButton}\n                        onClick={handleClick}>START\n                    </Button>\n                </>}\n            </h3>\n        </Box >\n    )\n}","import React from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom';\nimport Main from './route/Main';\nimport Home from './route/Home';\n\nfunction App() {\n  return (\n    <Router basename=\"/our-telepathy\">\n      <Switch>\n        <Route path=\"/team/:teamId/:userName\">\n          <Main />\n        </Route>\n        <Route path=\"/\">\n          <Home />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","// reducers/index.js\nimport { combineReducers } from \"redux\";\nimport { persistReducer } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\n\nimport myInfo from \"./myInfo/myInfo.reducer\";\nimport workingHours from \"./workingHours/workingHours.reducer\";\nimport memberList from './memberList/memberList.reducer';\n\nconst persistConfig = {\n    key: \"root\",\n    storage,\n    whitelist: [\"myInfo\", \"workingHours\"]\n};\n\nconst rootReducer = combineReducers({\n    myInfo,\n    workingHours,\n    memberList\n});\n\nexport default persistReducer(persistConfig, rootReducer);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { createStore } from 'redux';\nimport rootReducer from './store';\nimport { persistStore } from 'redux-persist';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\n\nconst store = createStore(rootReducer);\nconst persistor = persistStore(store);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate persistor={persistor}>\n        <App />\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}